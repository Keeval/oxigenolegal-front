define(["jquery",window.baseStyleJs+"/libraries/imagesloaded/imagesloaded.pkgd.min.js",window.baseStyleJs+"/libraries/jquery.inview/jquery.inview.min.js",window.baseStyleJs+"/structure/main-min.js",window.baseStyleJs+"/structure/modal-min.js"],function(){return{init:function(){$(document).resize(),$("#general").imagesLoaded({background:"div, a, span"},function(){$("html").addClass("htmlReady")}),window.general_appearEffects=function(){$(".appear, img, .wp-caption").on("inview",function(n,e){e&&$(this).addClass("appear--on")})},setTimeout(function(){window.general_appearEffects()},500),$("body").on("click touchend",".touchHover",function(n){$("html").hasClass("usingTouch")&&($(this).is("a")?$(this).hasClass("hover")||(n.preventDefault(),$(".touchHover").not(this).removeClass("hover"),$(this).addClass("hover")):(n.preventDefault(),$(".touchHover").not(this).removeClass("hover"),$(this).toggleClass("hover")))}),$("body").on("click touchend",".touchHover a",function(n){n.stopPropagation()}),$(document).on("click touchend",function(n){$(n.target).closest(".touchHover").length||$(n.target).is(".touchHover")||$(".touchHover").removeClass("hover")}),window.siteURL="http://"+top.location.host.toString(),window.pagePath=top.location.pathname.toString(),window.pageHash=top.location.hash.toString();var n="";window.general_markInternalLinks=function(){$("a[href^='"+window.siteURL+"'], a[href^='/'], a[href^='./'], a[href^='../'], a[href^='#']").not(".noInternalLink").addClass("internalLink"),$("#navigation__languages a").removeClass("internalLink"),$("#main__pagination a").removeClass("internalLink"),$("#modal__navigation a").removeClass("internalLink"),$(".wp-caption a").removeClass("internalLink"),$(".module--gallery a").removeClass("internalLink"),$(".gallery a").removeClass("internalLink"),$("#navigation__menu li.contact a").removeClass("internalLink"),$("a[href$='"+window.homePath+"']").addClass("homeLink")},window.general_markInternalLinks(),window.general_goHome=function(e){if($(window).trigger("resize"),window.navigation_navigationHide(),e=void 0===e||e){var o={};history.pushState(o,"",window.homePath)}document.title=n,"function"==typeof ga&&(ga("set",{page:window.location.pathname,title:document.title}),ga("send","pageview")),$("#navigation__menu li").removeClass("current-menu-item current-menu-parent current-menu-ancestor current_page_item current_page_parent current_page_ancestor"),$("#navigation__menu a.homeLink").parent("li").addClass("current-menu-item"),window.modal_modalHide(),window.timer1=setTimeout(function(){$("#modal__inner").empty(),$("#modal").removeClass()},1e3)},window.general_goToURL=function(n,e){clearTimeout(window.timer1),$("html").addClass("modalLoading"),$("#modal").delay(80).queue(function(){$.get(n).done(function(o){var t=$(o);window.navigation_navigationHide(),window.modal_modalShow(),setTimeout(function(){var o=t.find("#modal__inner > *");if($("#modal__inner").html(o),o=t.find("#modal"),$("#modal").removeClass().addClass(o.attr("class")),window.general_appearEffects(),e=void 0===e||e){var a={};history.pushState(a,"",n)}document.title=t.filter("title").text(),"function"==typeof ga&&(ga("set",{page:window.location.pathname,title:document.title}),ga("send","pageview"));var i=t.find("#navigation__menu > *");$("#navigation__menu").html(i);var r=t.find("#navigation__languages > *");if($("#navigation__languages").html(r),window.general_markInternalLinks(),$(window).trigger("resize"),$("html").removeClass("modalLoading"),n.indexOf("#")>0){var l=n.substring(n.indexOf("#"));window.modal_goToAnchor(l)}},1e3)}).fail(function(n){$("html").removeClass("modalLoading")})}).dequeue()},""!=window.pageHash&&(window.location.href=window.location.href.substr(0,window.location.href.indexOf("#")-1)),n=$(document).find("title").text(),window.pagePath!==window.homePath&&($.get(window.homePath).done(function(e){var o=$(e),t=o.find("#main > *");$("#main").html(t),n=$(e).filter("title").text(),$(window).trigger("resize")}),window.modal_modalShow()),$("body").on("click",".homeLink",function(n){n.preventDefault(),window.general_goHome()}),$("body").on("click",".internalLink:not(.homeLink)",function(n){n.preventDefault();var e=$(this).attr("href");window.general_goToURL(e)}),window.onpopstate=function(n){var e=document.location.href;e.endsWith(window.homePath)?window.general_goHome(!1):window.general_goToURL(e,!1)},"function"==typeof ga&&$("body").on("click",'input[type="submit"], button[type="submit"]',function(){ga("send","event",{eventCategory:"button",eventAction:"submit",eventLabel:"Form submit button clicked",eventValue:top.location.pathname.toString()})})}}});